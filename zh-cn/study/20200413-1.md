# Docker 安装 Nginx

---

## 1. docker安装nginx

* 拉取nginx

```Shell
docker pull nginx
```

* 创建实例（用于复制配置文件）

```Shell
docker run --name nginx2 -p 8081:80  -d nginx
```

* 环境准备（创建目录 nginx, 用于存放相关挂载文件）

  * www: 目录将映射为 nginx 容器配置的虚拟目录。
  * logs: 目录将映射为 nginx 容器的日志目录。
  * conf: 目录里的配置文件将映射为 nginx 容器的配置文件。

```Shell
mkdir -p ~/nginx/www ~/nginx/logs ~/nginx/conf
```

拷贝容器内 nginx 默认配置文件到本地挂载目录下的 conf 目录

```Shell
docker cp 33aa6f081d83:/etc/nginx/nginx.conf ~/nginx/conf
docker cp 33aa6f081d83:/etc/nginx/conf.d/default.conf ~/nginx/conf
```

* 创建实例（真正实例）

  * -p 8082:80： 将容器的 80 端口映射到主机的 8082 端口。
  * --name runoob-nginx-test-web：将容器命名为 runoob-nginx-test-web。
  * -v ~/nginx/www:/usr/share/nginx/html：将我们自己创建的 www 目录挂载到容器的 /usr/share/nginx/html
  * -v ~/nginx/conf/nginx.conf:/etc/nginx/nginx.conf：将我们自己创建的 nginx.conf 挂载到容器的 /etc/nginx/nginx.conf
  * -v ~/nginx/logs:/var/log/nginx：将我们自己创建的 logs 挂载到容器的 /var/log/nginx

```Shell
docker run -d -p 8083:80 --name run-nginx -v ~/nginx/www:/usr/share/nginx/html -v ~/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -v ~/nginx/logs:/var/log/nginx -v ~/nginx/conf/default.conf:/etc/nginx/conf.d/default.conf  nginx
```

* 测试nginx是否正常运行

在本地挂载的nginx/www目录下创建index.html文件

```html
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>菜鸟教程(runoob.com)</title>
</head>
<body>
    <h1>我的第一个标题</h1>
    <p>我的第一个段落。</p>
</body>
</html>
```

访问查看

```Shell
192.168.141.129:8083
```
